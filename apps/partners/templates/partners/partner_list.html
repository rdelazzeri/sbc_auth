{% extends "base.html" %}
{% load render_table from django_tables2 %}
{% load i18n %}
{% load crispy_forms_tags %}


{% block content %}
<div id="main-div">
  
  <div class="card" id="card-div">
    <div class="card-header d-flex justify-content-between">
      <h3>Partners</h3>
      <div class="btn-group" role="group" aria-label="Basic example">
        <button type="button" class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">Filter</button>
        <button 
          type="button" 
          class="btn btn-outline-primary"
          hx-get="{% url 'partner:partner_list' %}" 
          hx-push-url="true"
          hx-select="#list_table" 
          hx-target="div.table-container" 
          hx-swap="outerHTML" 
          hx-indicator=".progress"> 
          All
        </button>
        <button 
          type="button" 
          class="btn btn-outline-primary"
          hx-get="{% url 'partner:partner_new' %}"
          hx-trigger="click"
          hx-push-url="true" 
          hx-select="#main-div"
          hx-target="#content"
          hx-swap="innerHTML"
          hx-target="#response-div"
          hx-disabled-elt="find button"
          hx-indicator="#spinner"
          hx-target-5*="#error500"
          hx-target-404="#error400"  
          >New
        </button>
        <button 
          type="button" 
          class="btn btn-outline-primary"
          onclick="toggle_selection(this);"
          name="btn-selection"
          value="true"
          >Select all
        </button>
        <button
          onclick="bulk_modal(this, `{% url 'partner:partners_bulk_action' %}`);"
          class="btn btn-outline-primary" 
          type="button">
          Bulk
      </button>


      </div>
    </div>

    <div class="card_body"> 
      {# Progress indicator #}
      <div class="progress">
          <div class="indeterminate"></div>
      </div>
      
      <div id="list_table">
        {# The actual table #}
        {% render_table table %}
      </div>

    </div>
  </div>
  

<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="true" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div id="search_form">      
          {# Search form #}
          <form 
              id="filter-form"
              hx-get="{% url 'partner:partner_list' %}" 
              hx-push-url="true"
              hx-select="#main-div" 
              hx-target="#content" 
              hx-swap="innerHTML" 
              hx-indicator=".progress" 
              class="form-inline">
              {% crispy filter.form %} 
              {# { filter.form|crispy } #}
          </form>
        </div>  
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary" data-bs-dismiss="modal" form="filter-form">Filtrar</button>
      </div>
    </div>
  </div>
</div>



</div>
{% endblock %}

